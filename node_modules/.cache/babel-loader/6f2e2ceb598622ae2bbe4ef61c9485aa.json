{"ast":null,"code":"import _defineProperty from\"/root/web/pasa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/root/web/pasa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/root/web/pasa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/root/web/pasa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/root/web/pasa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Grid,Row,Col,Table}from\"react-bootstrap\";import Form from'react-bootstrap/Form';import{Card}from\"components/Card/Card.jsx\";import\"assets/css/customcss.css\";import Button from'react-bootstrap/Button';import{Api_route}from'../components/baseApi';import axios from'axios';import Spinner from'react-spinner-material';//import Badge from 'react-bootstrap/Badge'\nimport'materialize-css';import{confirmAlert}from'react-confirm-alert';import'react-confirm-alert/src/react-confirm-alert.css';var UserProfile=/*#__PURE__*/function(_Component){_inherits(UserProfile,_Component);var _super=_createSuper(UserProfile);function UserProfile(){var _this;_classCallCheck(this,UserProfile);_this=_super.call(this);_this.changeHandler=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.submitHandeler=function(e){e.preventDefault();var _this$state=_this.state,email=_this$state.email,name=_this$state.name,password=_this$state.password,phone=_this$state.phone,role=_this$state.role,conf_password=_this$state.conf_password;var Body={\"email\":email,\"name\":name,\"password\":password,\"phone\":phone,\"role\":role};if(password===conf_password){_this.setState({is_createuser:true});axios.post(Api_route(\"users?userId=\"+window.sessionStorage.getItem(\"userID\")),Body).then(function(response){// console.log(response);\nconfirmAlert({title:'Succés',message:\"Enregistré avec succés\",buttons:[{label:'ok',onClick:function onClick(){_this.setState({email:null,name:null,password:null,phone:null,role:\"AGENT\",conf_password:null},_this.Get_user_from_api());}}]});}).catch(function(error){// console.log(error.response.data.message);\n// alert(error.response.data.message);\nconfirmAlert({title:'Erreur',message:error.response.data.message,buttons:[{label:'Réessayer',onClick:function onClick(){return _this.setState({is_createuser:false});}}]});});}else{confirmAlert({title:'Erreur',message:\"Mot de pass non idendique\",buttons:[{label:'Réessayer',onClick:function onClick(){return _this.setState({is_createuser:false});}}]});}};_this.state={change_panel:false,dataSource:[],isload_data:true,email:null,name:null,password:null,phone:null,role:\"AGENT\",conf_password:null,modalShow:false,idUser:null,is_createuser:false};return _this;}_createClass(UserProfile,[{key:\"change_panel\",value:function change_panel(etat){this.setState({change_panel:etat,email:null,name:null,password:null,phone:null,role:\"AGENT\",conf_password:null});}},{key:\"Get_user_from_api\",value:function Get_user_from_api(){var _this2=this;var url=\"users?page=0&size=4\";fetch(Api_route(url)).then(function(response){return response.json();}).then(function(responseJson){_this2.setState({dataSource:responseJson.content,isload_data:false,modalShow:false,idUser:null,is_createuser:false});console.log(responseJson);}).catch(function(error){console.log(error);});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.setState({change_panel:false,dataSource:[],isload_data:true,email:null,name:null,password:null,phone:null,role:\"AGENT\",conf_password:null,modalShow:false,idUser:null,is_createuser:false});}},{key:\"componentDidMount\",value:function componentDidMount(){this.Get_user_from_api();}},{key:\"changeEtatuserHandeler\",value:function changeEtatuserHandeler(idUser){var _this3=this;if(idUser){axios.patch(Api_route(\"users/disable-user?adminId=\"+window.sessionStorage.getItem(\"userID\")+\"&userId=\"+idUser)).then(function(response){console.log(response);confirmAlert({title:'Succés',message:\"Effectué avec succés\",buttons:[{label:'ok',onClick:function onClick(){_this3.Get_user_from_api();}}]});}).catch(function(error){confirmAlert({title:'Erreur',message:error.response.data.message,buttons:[{label:'Réessayer',onClick:function onClick(){return _this3.setState({is_createuser:false});}}]});});}}},{key:\"deleteHandeler\",value:function deleteHandeler(idUser){var _this4=this;if(idUser){axios.delete(Api_route(\"users/\"+idUser)).then(function(response){console.log(response);confirmAlert({title:'Succés',message:\"Supprimé avec succés\",buttons:[{label:'ok',onClick:function onClick(){_this4.Get_user_from_api();;}}]});}).catch(function(error){confirmAlert({title:'Erreur',message:error.response.data.message,buttons:[{label:'Réessayer',onClick:function onClick(){return _this4.setState({is_createuser:false});}}]});});}}},{key:\"modalEvent\",value:function modalEvent(event,id){this.setState({modalShow:event,idUser:id});}},{key:\"render\",value:function render(){var _this5=this;var _this$state2=this.state,email=_this$state2.email,name=_this$state2.name,password=_this$state2.password,phone=_this$state2.phone,role=_this$state2.role,conf_password=_this$state2.conf_password;// console.log(this.state.dataSource);\nreturn/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},this.state.change_panel?/*#__PURE__*/React.createElement(Grid,{fluid:true},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(Card,{title:\"Ajouter Un utilisateur\",content:/*#__PURE__*/React.createElement(Form,{onSubmit:this.submitHandeler},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formnom\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Nom complet :\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"Enter le mon complet\",name:\"name\",required:true,value:name,onChange:this.changeHandler})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"foremail\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Email :\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"email\",placeholder:\"Enter le email\",name:\"email\",required:true,value:email,onChange:this.changeHandler})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"forphone\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Num\\xE9ro de t\\xE9l\\xE9phone :\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"tel\",placeholder:\"le Num\\xE9ro de t\\xE9l\\xE9phone \",name:\"phone\",required:true,value:phone,onChange:this.changeHandler})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"forpss\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Mot de pass:\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"password\",placeholder:\"Mot de pass \",name:\"password\",required:true,value:password,onChange:this.changeHandler})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"forpss\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Confirmer le mot de pass:\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"password\",placeholder:\"Confirmer le mot de pass \",name:\"conf_password\",required:true,value:conf_password,onChange:this.changeHandler})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"exampleForm.ControlSelect1\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Role\"),/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",name:\"role\",value:role,onChange:this.changeHandler},/*#__PURE__*/React.createElement(\"option\",{value:\"AGENT\"},\"AGENT\"),/*#__PURE__*/React.createElement(\"option\",{value:\"ADMIN\"},\"ADMIN\"))),!this.state.is_createuser?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Button,{variant:\"primary\",type:\"submit\"},\"Enregistrer\"),/*#__PURE__*/React.createElement(Button,{variant:\"danger\",type:\"button\",className:\"btn_margin\",onClick:function onClick(){_this5.change_panel(false);}},\"QUITTER\")):/*#__PURE__*/React.createElement(\"div\",{className:\"loader\"},/*#__PURE__*/React.createElement(Spinner,{size:120,spinnerColor:\"#333\",spinnerWidth:2,visible:true})))})))):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\" p-b-1 m-b-10\"},/*#__PURE__*/React.createElement(Col,{md:3},/*#__PURE__*/React.createElement(\"button\",{className:\"bg_site btn  btn_site\",onClick:function onClick(){_this5.change_panel(true);}},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-plus-circle\"})))),/*#__PURE__*/React.createElement(Grid,{fluid:true},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(Card,{title:\"List des agents\",category:\"\",ctTableFullWidth:true// ctTableResponsive\n,content:/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Table,{striped:true,responsive:true,hover:true},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"NOM COMPLET\"),/*#__PURE__*/React.createElement(\"th\",null,\"NUMERO DE TELEEPHONE\"),/*#__PURE__*/React.createElement(\"th\",null,\"EMAIL\"),/*#__PURE__*/React.createElement(\"th\",null,\"ROLE\"),/*#__PURE__*/React.createElement(\"th\",null,\"ETAT\"),/*#__PURE__*/React.createElement(\"th\",null,\"DATE DE CREATION\"),/*#__PURE__*/React.createElement(\"th\",null),/*#__PURE__*/React.createElement(\"th\",null))),/*#__PURE__*/React.createElement(\"tbody\",null,this.state.dataSource?this.state.dataSource.map(function(data,key){return/*#__PURE__*/React.createElement(\"tr\",{key:key},/*#__PURE__*/React.createElement(\"td\",null,data.name),/*#__PURE__*/React.createElement(\"td\",null,data.phone?data.phone:\"pas de numéro\"),/*#__PURE__*/React.createElement(\"td\",null,data.email),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"span\",{className:data.role===\"ADMIN\"?\"etat bg_site\":null},data.role,\" \")),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"span\",{className:data.enabled?\"etat bg_site\":\"etat bg_danger\"},data.enabled?\"ACTIVÉ\":\"DESACTIVÉ\",\" \")),/*#__PURE__*/React.createElement(\"td\",null,data.creationDate),_this5.state.modalShow&&_this5.state.idUser===data.id?null:/*#__PURE__*/React.createElement(\"td\",null,\" \",/*#__PURE__*/React.createElement(\"button\",{className:data.enabled?\"bg_danger btn  btn_site\":\"bg_site btn  btn_site\",onClick:function onClick(){_this5.setState({isload_data:true},_this5.changeEtatuserHandeler(data.id));}},data.enabled?\"DESACTIVER\":\"REACTIVER\")),/*#__PURE__*/React.createElement(\"td\",null,_this5.state.modalShow&&_this5.state.idUser===data.id?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"p\",null,\"Supprimer cet agent?\"),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"text-danger\",onClick:function onClick(){_this5.setState({isload_data:true},_this5.deleteHandeler(data.id));}},\"oui\"),/*#__PURE__*/React.createElement(\"button\",{className:\"text-primary\",onClick:function onClick(){_this5.modalEvent(false,null);}},\"non\"))):/*#__PURE__*/React.createElement(\"button\",{className:\"bg_danger btn  btn_site\",onClick:function onClick(){_this5.modalEvent(true,data.id);}},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-trash\"}))));}):null)),/*#__PURE__*/React.createElement(\"div\",{className:\"loader\"},/*#__PURE__*/React.createElement(Spinner,{size:120,spinnerColor:\"#333\",spinnerWidth:2,visible:this.state.isload_data})))}))))));}}]);return UserProfile;}(Component);export default UserProfile;","map":{"version":3,"sources":["/root/web/pasa/src/views/UserProfile.jsx"],"names":["React","Component","Grid","Row","Col","Table","Form","Card","Button","Api_route","axios","Spinner","confirmAlert","UserProfile","changeHandler","e","setState","target","name","value","submitHandeler","preventDefault","state","email","password","phone","role","conf_password","Body","is_createuser","post","window","sessionStorage","getItem","then","response","title","message","buttons","label","onClick","Get_user_from_api","catch","error","data","change_panel","dataSource","isload_data","modalShow","idUser","etat","url","fetch","json","responseJson","content","console","log","patch","delete","event","id","map","key","enabled","creationDate","changeEtatuserHandeler","deleteHandeler","modalEvent"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  Grid,\n  Row,\n  Col,\n  Table,\n\n} from \"react-bootstrap\";\nimport Form from 'react-bootstrap/Form'\n\nimport { Card } from \"components/Card/Card.jsx\";\n\nimport \"assets/css/customcss.css\";\nimport Button from 'react-bootstrap/Button'\nimport { Api_route } from '../components/baseApi'\nimport axios from 'axios';\nimport Spinner from 'react-spinner-material';\n//import Badge from 'react-bootstrap/Badge'\nimport 'materialize-css';\nimport { confirmAlert } from 'react-confirm-alert';\nimport 'react-confirm-alert/src/react-confirm-alert.css'\n\n\nclass UserProfile extends Component {\n  constructor() {\n    super()\n    this.state = {\n      change_panel: false,\n      dataSource: [],\n      isload_data: true,\n      email: null,\n      name: null,\n      password: null,\n      phone: null,\n      role: \"AGENT\",\n      conf_password: null,\n      modalShow: false,\n      idUser: null,\n      is_createuser: false,\n    }\n\n  }\n\n  change_panel(etat) {\n    this.setState({\n      change_panel: etat,\n      email: null,\n      name: null,\n      password: null,\n      phone: null,\n      role: \"AGENT\",\n      conf_password: null,\n    });\n  }\n\n\n  Get_user_from_api() {\n\n\n    const url = \"users?page=0&size=4\"\n    fetch(Api_route(url))\n      .then((response) => response.json())\n      .then((responseJson) => {\n        this.setState({\n          dataSource: responseJson.content,\n          isload_data: false,\n          modalShow: false,\n          idUser: null,\n          is_createuser: false,\n        })\n        console.log(responseJson);\n\n      })\n      .catch((error) => {\n\n        console.log(error)\n\n      })\n\n\n\n\n  }\n  componentWillUnmount() {\n    this.setState({\n      change_panel: false,\n      dataSource: [],\n      isload_data: true,\n      email: null,\n      name: null,\n      password: null,\n      phone: null,\n      role: \"AGENT\",\n      conf_password: null,\n      modalShow: false,\n      idUser: null,\n      is_createuser: false,\n    });\n  }\n\n  componentDidMount() {\n    this.Get_user_from_api();\n  }\n\n  changeHandler = e => {\n    this.setState({ [e.target.name]: e.target.value });\n  }\n  submitHandeler = e => {\n    e.preventDefault();\n\n    const { email, name, password, phone, role, conf_password } = this.state;\n    let Body = {\n      \"email\": email,\n      \"name\": name,\n      \"password\": password,\n      \"phone\": phone,\n      \"role\": role\n\n    };\n    if (password === conf_password) {\n      this.setState({\n        is_createuser: true\n      });\n      axios.post(Api_route(\"users?userId=\" + window.sessionStorage.getItem(\"userID\")), Body)\n        .then(response => {\n\n          // console.log(response);\n          confirmAlert({\n            title: 'Succés',\n            message: \"Enregistré avec succés\",\n            buttons: [\n              {\n                label: 'ok',\n                onClick: () => {\n                  this.setState({\n                    email: null,\n                    name: null,\n                    password: null,\n                    phone: null,\n                    role: \"AGENT\",\n                    conf_password: null,\n                  }, this.Get_user_from_api());\n\n                }\n              }\n            ]\n          })\n\n\n        })\n        .catch(error => {\n          // console.log(error.response.data.message);\n          // alert(error.response.data.message);\n\n          confirmAlert({\n            title: 'Erreur',\n            message: error.response.data.message,\n            buttons: [\n              {\n                label: 'Réessayer',\n                onClick: () => this.setState({\n                  is_createuser: false\n                })\n              }\n            ]\n          })\n\n\n\n        })\n    } else {\n      confirmAlert({\n        title: 'Erreur',\n        message: \"Mot de pass non idendique\",\n        buttons: [\n          {\n            label: 'Réessayer',\n            onClick: () => this.setState({\n              is_createuser: false\n            })\n          }\n        ]\n      })\n    }\n\n  }\n\n  changeEtatuserHandeler(idUser) {\n    if (idUser) {\n      axios.patch(Api_route(\"users/disable-user?adminId=\" + window.sessionStorage.getItem(\"userID\") + \"&userId=\" + idUser))\n        .then(response => {\n\n          console.log(response);\n          confirmAlert({\n            title: 'Succés',\n            message: \"Effectué avec succés\",\n            buttons: [\n              {\n                label: 'ok',\n                onClick: () => {\n                  this.Get_user_from_api();\n\n                }\n              }\n            ]\n          })\n        })\n        .catch(error => {\n          confirmAlert({\n            title: 'Erreur',\n            message: error.response.data.message,\n            buttons: [\n              {\n                label: 'Réessayer',\n                onClick: () => this.setState({\n                  is_createuser: false\n                })\n              }\n            ]\n          });\n        })\n    }\n  }\n\n  deleteHandeler(idUser) {\n    if (idUser) {\n      axios.delete(Api_route(\"users/\" + idUser))\n        .then(response => {\n\n          console.log(response);\n\n          confirmAlert({\n            title: 'Succés',\n            message: \"Supprimé avec succés\",\n            buttons: [\n              {\n                label: 'ok',\n                onClick: () => {\n                  this.Get_user_from_api();;\n\n                }\n              }\n            ]\n          })\n        })\n        .catch(error => {\n          confirmAlert({\n            title: 'Erreur',\n            message: error.response.data.message,\n            buttons: [\n              {\n                label: 'Réessayer',\n                onClick: () => this.setState({\n                  is_createuser: false\n                })\n              }\n            ]\n          });\n        })\n    }\n  }\n  modalEvent(event, id) {\n    this.setState({\n      modalShow: event,\n      idUser: id,\n    });\n  }\n  render() {\n    const { email, name, password, phone, role, conf_password } = this.state;\n    // console.log(this.state.dataSource);\n\n\n    return (\n\n      <div className=\"content\">\n\n\n\n\n        {\n          this.state.change_panel\n            ?\n\n\n            <Grid fluid>\n              <Row>\n                <Col md={12}>\n\n                  <Card\n                    title=\"Ajouter Un utilisateur\"\n                    content={\n\n                      <Form onSubmit={this.submitHandeler}>\n\n\n                        <Form.Group controlId=\"formnom\">\n                          <Form.Label>Nom complet :</Form.Label>\n                          <Form.Control type=\"text\" placeholder=\"Enter le mon complet\" name=\"name\" required value={name} onChange={this.changeHandler} />\n                        </Form.Group>\n\n                        <Form.Group controlId=\"foremail\">\n                          <Form.Label>Email :</Form.Label>\n                          <Form.Control type=\"email\" placeholder=\"Enter le email\" name=\"email\" required value={email} onChange={this.changeHandler} />\n                        </Form.Group>\n\n                        <Form.Group controlId=\"forphone\">\n                          <Form.Label>Numéro de téléphone :</Form.Label>\n                          <Form.Control type=\"tel\" placeholder=\"le Numéro de téléphone \" name=\"phone\" required value={phone} onChange={this.changeHandler} />\n                        </Form.Group>\n\n                        <Form.Group controlId=\"forpss\">\n                          <Form.Label>Mot de pass:</Form.Label>\n                          <Form.Control type=\"password\" placeholder=\"Mot de pass \" name=\"password\" required value={password} onChange={this.changeHandler} />\n                        </Form.Group>\n                        <Form.Group controlId=\"forpss\">\n                          <Form.Label>Confirmer le mot de pass:</Form.Label>\n                          <Form.Control type=\"password\" placeholder=\"Confirmer le mot de pass \" name=\"conf_password\" required value={conf_password} onChange={this.changeHandler} />\n                        </Form.Group>\n\n\n\n\n                        <Form.Group controlId=\"exampleForm.ControlSelect1\">\n                          <Form.Label>Role</Form.Label>\n                          <Form.Control as=\"select\" name=\"role\" value={role} onChange={this.changeHandler} >\n                            <option value=\"AGENT\"  >AGENT</option>\n                            <option value=\"ADMIN\">ADMIN</option>\n\n                          </Form.Control>\n                        </Form.Group>\n                        {\n                          !this.state.is_createuser\n                            ?\n                            <>\n                              <Button variant=\"primary\" type=\"submit\" >\n                                Enregistrer\n                             </Button>\n                              <Button variant=\"danger\" type=\"button\" className=\"btn_margin\" onClick={() => { this.change_panel(false) }}>\n                                QUITTER\n                             </Button>\n\n                            </>\n                            :\n                            <div className=\"loader\">\n                              <Spinner size={120} spinnerColor={\"#333\"} spinnerWidth={2} visible={true} />\n                            </div>\n\n                        }\n\n                      </Form>\n\n                    }\n                  />\n                </Col>\n              </Row>\n            </Grid>\n            :\n\n            <>\n\n\n              <div className=\" p-b-1 m-b-10\">\n                <Col md={3}>\n                  <button className=\"bg_site btn  btn_site\" onClick={() => { this.change_panel(true) }}><i className=\"fa fa-plus-circle\"></i></button>\n                </Col>\n\n              </div>\n\n\n\n\n\n              <Grid fluid>\n\n\n                <Row>\n                  <Col md={12}>\n\n                    <Card\n                      title=\"List des agents\"\n                      category=\"\"\n                      ctTableFullWidth\n                      // ctTableResponsive\n                      content={\n                        <>\n\n                          <Table striped responsive hover>\n                            <thead>\n                              <tr>\n                                <th >NOM COMPLET</th>\n                                <th >NUMERO DE TELEEPHONE</th>\n                                <th >EMAIL</th>\n                                <th>ROLE</th>\n                                <th>ETAT</th>\n                                <th>DATE DE CREATION</th>\n                                {/* <th>DATE DE MODIFICATION</th> */}\n                                <th></th>\n                                <th></th>\n                              </tr>\n                            </thead>\n\n                            <tbody>\n\n                              {\n                                this.state.dataSource\n                                  ?\n                                  this.state.dataSource.map((data, key) => {\n                                    return (\n                                      <tr key={key}>\n                                        <td>{data.name}</td>\n                                        <td>{data.phone ? data.phone : \"pas de numéro\"}</td>\n                                        <td>{data.email}</td>\n                                        <td><span className={data.role === \"ADMIN\" ? \"etat bg_site\" : null}>{data.role} </span></td>\n                                        <td>\n                                          {/* <Badge pill variant=\"primary\">\n                                        Info\n                                      </Badge>{''} */\n                                          }\n                                          <span className={data.enabled ? \"etat bg_site\" : \"etat bg_danger\"}>{data.enabled ? \"ACTIVÉ\" : \"DESACTIVÉ\"} </span>\n                                        </td>\n                                        <td>{data.creationDate}</td>\n                                        {/* <td>{data.updateDate}</td> */}\n                                        {/* <td><Button variant={data.enabled?\"danger\":\"primary\"}>{data.enabled?\"ACTIVER\":\"DESACTIVER\"}</Button></td>  */}\n                                        {\n                                          this.state.modalShow && this.state.idUser === data.id\n                                            ?\n                                            null\n                                            :\n                                            <td> <button className={data.enabled ? \"bg_danger btn  btn_site\" : \"bg_site btn  btn_site\"} onClick={() => {\n                                              this.setState({\n                                                isload_data: true\n                                              }, this.changeEtatuserHandeler(data.id));\n                                            }}  >{data.enabled ? \"DESACTIVER\" : \"REACTIVER\"}</button></td>\n\n                                        }\n                                        <td>\n                                          {\n                                            this.state.modalShow && this.state.idUser === data.id\n                                              ?\n                                              <>\n                                                <p>Supprimer cet agent?</p>\n                                                <p><button className=\"text-danger\"\n                                                  onClick={() => {\n                                                    this.setState({\n                                                      isload_data: true\n                                                    }, this.deleteHandeler(data.id));\n                                                  }}\n                                                >oui</button>\n                                                  <button className=\"text-primary\"\n                                                    onClick={() => {\n                                                      this.modalEvent(false, null);\n                                                    }}\n                                                  >non</button></p>\n\n                                              </>\n                                              :\n                                              <button className=\"bg_danger btn  btn_site\"\n                                                onClick={() => {\n                                                  this.modalEvent(true, data.id);\n                                                }}\n                                              ><i className=\"fa fa-trash\"></i></button>\n\n\n                                          }\n                                        </td>\n                                      </tr>\n                                    );\n                                  })\n                                  :\n                                  null\n                              }\n                            </tbody>\n                          </Table>\n                          <div className=\"loader\">\n                            <Spinner size={120} spinnerColor={\"#333\"} spinnerWidth={2} visible={this.state.isload_data} />\n                          </div>\n                        </>\n                      }\n                    />\n                  </Col>\n                </Row>\n              </Grid>\n\n            </>\n        }\n\n\n\n\n      </div>\n    );\n  }\n}\n\nexport default UserProfile;\n"]},"metadata":{},"sourceType":"module"}