{"ast":null,"code":"import _defineProperty from\"/root/web/pasa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/root/web/pasa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/root/web/pasa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/root/web/pasa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/root/web/pasa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"assets/css/customcss.css\";import\"assets/css/light-bootstrap-dashboard-react.css\";import\"bootstrap/dist/css/bootstrap.min.css\";import\"assets/css/animate.min.css\";import\"assets/sass/light-bootstrap-dashboard-react.scss?v=1.3.0\";import\"assets/css/demo.css\";import\"assets/css/pe-icon-7-stroke.css\";import avatar from\"assets/img/default-avatar.png\";import{Api_route}from'../components/baseApi';import axios from'axios';import Spinner from'react-spinner-material';//import Badge from 'react-bootstrap/Badge'\nimport'materialize-css';import{confirmAlert}from'react-confirm-alert';var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);_this=_super.call(this);_this.changeHandler=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.submitHandeler=function(e){e.preventDefault();var _this$state=_this.state,username=_this$state.username,password=_this$state.password;var Body={\"username\":username,\"password\":password};if(password!=null&&password!=null){_this.changeLoaderVisiblility(true);axios.post(Api_route(\"users/login\"),Body).then(function(response){_this.changeLoaderVisiblility(false);if(response.data.role===\"ADMIN\"&&response.data.enabled){console.log(\"data\",response.data);window.location.href=\"/admin/dashboard\";window.sessionStorage.setItem(\"nameUser\",response.data.name);window.sessionStorage.setItem(\"emailUser\",response.data.email);window.sessionStorage.setItem(\"userID\",response.data.id);window.sessionStorage.setItem(\"roleUser\",response.data.role);window.sessionStorage.setItem(\"rolephone\",response.data.phone);}else{confirmAlert({title:'Rejeter ',message:\"L'utilisateur n'est pas autorisé à accéder à cet site\",buttons:[{label:'Réessayer',onClick:function onClick(){return _this.setState({is_createuser:false});}}]});}console.log(\"role\",response.data.role);}).catch(function(error){// console.log(\"erreur\",error.response.data);\n// alert(error.response.data.message);\n_this.changeLoaderVisiblility(false);confirmAlert({title:'Rejeter',message:error.response.data,buttons:[{label:'Réessayer',onClick:function onClick(){return _this.setState({is_createuser:false});}}]});});}else{confirmAlert({title:'Erreur',message:\"Mot de pass ou nom d'utilisateur est vide \",buttons:[{label:'Réessayer',onClick:function onClick(){return _this.setState({is_createuser:false});}}]});}};_this.state={isload_data:false,username:null,password:null,showErreur:false,message:null};return _this;}_createClass(Login,[{key:\"changeLoaderVisiblility\",value:function changeLoaderVisiblility(visible){this.setState({isload_data:visible});}},{key:\"render\",value:function render(){var _this$state2=this.state,username=_this$state2.username,password=_this$state2.password;return/*#__PURE__*/React.createElement(\"div\",{className:\"limiter\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container-login100 bg_site\"},/*#__PURE__*/React.createElement(\"div\",{className:\"wrap-login100 p-t-50 p-b-3 bg_wt\"},/*#__PURE__*/React.createElement(\"div\",{className:\"logoLogin \"},/*#__PURE__*/React.createElement(\"h2\",{className:\"titre_logo2\"},\"PASA\",/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-leaf\",\"aria-hidden\":\"true\"})),/*#__PURE__*/React.createElement(\"p\",null,\"Dashboard\")),/*#__PURE__*/React.createElement(\"form\",{className:\"login100-form validate-form\",onSubmit:this.submitHandeler},/*#__PURE__*/React.createElement(\"div\",{class:\"login100-form-avatar\"},/*#__PURE__*/React.createElement(\"img\",{src:avatar,alt:\"AVATAR\"})),/*#__PURE__*/React.createElement(\"span\",{className:\"login100-form-title p-t-20 p-b-45\"},\"Connectez-vous!\"),/*#__PURE__*/React.createElement(\"div\",{className:\"wrap-input100 validate-input m-b-10 m-t-10\"},/*#__PURE__*/React.createElement(\"input\",{className:\"input100\",type:\"text\",name:\"username\",placeholder:\"Entrez nom d'utilisateur\",value:username,onChange:this.changeHandler}),/*#__PURE__*/React.createElement(\"span\",{className:\"focus-input100\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"symbol-input100\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-user\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"wrap-input100 validate-input m-b-10\"},/*#__PURE__*/React.createElement(\"input\",{className:\"input100\",type:\"password\",name:\"password\",placeholder:\"Entrez Mot de pass\",value:password,onChange:this.changeHandler}),/*#__PURE__*/React.createElement(\"span\",{className:\"focus-input100\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"symbol-input100\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-lock\"}))),this.state.isload_data?/*#__PURE__*/React.createElement(\"div\",{className:\"loader \"},/*#__PURE__*/React.createElement(Spinner,{size:120,spinnerColor:\"#333\",spinnerWidth:2,visible:this.state.isload_data})):/*#__PURE__*/React.createElement(\"div\",{className:\"container-login100-form-btn p-t-10\"},/*#__PURE__*/React.createElement(\"button\",{className:\"login100-form-btn\"},\"Login\"))))));}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["/root/web/pasa/src/views/login.jsx"],"names":["React","Component","avatar","Api_route","axios","Spinner","confirmAlert","Login","changeHandler","e","setState","target","name","value","submitHandeler","preventDefault","state","username","password","Body","changeLoaderVisiblility","post","then","response","data","role","enabled","console","log","window","location","href","sessionStorage","setItem","email","id","phone","title","message","buttons","label","onClick","is_createuser","catch","error","isload_data","showErreur","visible"],"mappings":"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","sourcesContent":["\nimport React, { Component } from \"react\";\nimport \"assets/css/customcss.css\"\nimport \"assets/css/light-bootstrap-dashboard-react.css\"\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"assets/css/animate.min.css\";\nimport \"assets/sass/light-bootstrap-dashboard-react.scss?v=1.3.0\";\nimport \"assets/css/demo.css\";\nimport \"assets/css/pe-icon-7-stroke.css\";\nimport avatar from \"assets/img/default-avatar.png\"\nimport { Api_route } from '../components/baseApi'\nimport axios from 'axios';\nimport Spinner from 'react-spinner-material';\n//import Badge from 'react-bootstrap/Badge'\nimport 'materialize-css';\nimport { confirmAlert } from 'react-confirm-alert';\nclass Login extends Component {\n\n\n  constructor() {\n    super()\n    this.state = {\n      isload_data: false,\n      username: null,\n      password: null,\n      showErreur: false,\n      message: null,\n    }\n\n  }\n\n  changeHandler = e => {\n    this.setState({ [e.target.name]: e.target.value });\n  }\n  changeLoaderVisiblility(visible) {\n    this.setState({\n      isload_data: visible\n    });\n  }\n\n\n  submitHandeler = e => {\n    e.preventDefault();\n\n    const { username, password } = this.state;\n    let Body = {\n      \"username\": username,\n      \"password\": password,\n\n    };\n    if (password != null && password != null) {\n      this.changeLoaderVisiblility(true);\n      axios.post(Api_route(\"users/login\"), Body)\n        .then(response => {\n\n          this.changeLoaderVisiblility(false);\n          if (response.data.role === \"ADMIN\" && response.data.enabled) {\n            console.log(\"data\", response.data);\n            window.location.href=\"/admin/dashboard\";\n\n            window.sessionStorage.setItem(\"nameUser\",response.data.name);\n            window.sessionStorage.setItem(\"emailUser\",response.data.email);\n            window.sessionStorage.setItem(\"userID\",response.data.id);\n            window.sessionStorage.setItem(\"roleUser\",response.data.role);\n            window.sessionStorage.setItem(\"rolephone\",response.data.phone);\n           \n\n\n\n\n          } else {\n            confirmAlert({\n              title: 'Rejeter ',\n              message: \"L'utilisateur n'est pas autorisé à accéder à cet site\",\n              buttons: [\n                {\n                  label: 'Réessayer',\n                  onClick: () => this.setState({\n                    is_createuser: false\n                  })\n                }\n              ]\n            })\n\n          }\n\n          console.log(\"role\", response.data.role);\n\n\n\n        })\n        .catch(error => {\n          // console.log(\"erreur\",error.response.data);\n          // alert(error.response.data.message);\n          this.changeLoaderVisiblility(false);\n          confirmAlert({\n            title: 'Rejeter',\n            message: error.response.data,\n            buttons: [\n              {\n                label: 'Réessayer',\n                onClick: () => this.setState({\n                  is_createuser: false\n                })\n              }\n            ]\n          })\n\n\n\n        })\n    } else {\n      confirmAlert({\n        title: 'Erreur',\n        message: \"Mot de pass ou nom d'utilisateur est vide \",\n        buttons: [\n          {\n            label: 'Réessayer',\n            onClick: () => this.setState({\n              is_createuser: false\n            })\n          }\n        ]\n      })\n    }\n\n  }\n\n\n  render() {\n\n    const { username, password } = this.state;\n    return (\n\n      <div className=\"limiter\">\n        <div className=\"container-login100 bg_site\" >\n          <div className=\"wrap-login100 p-t-50 p-b-3 bg_wt\">\n            <div className=\"logoLogin \">\n              <h2 className=\"titre_logo2\">\n                PASA<i className=\"fa fa-leaf\" aria-hidden=\"true\"></i>\n              </h2>\n              <p>\n                Dashboard\n            </p>\n            </div>\n            <form className=\"login100-form validate-form\" onSubmit={this.submitHandeler}>\n              <div class=\"login100-form-avatar\">\n                <img src={avatar} alt=\"AVATAR\" />\n              </div>\n\n              <span className=\"login100-form-title p-t-20 p-b-45\">\n                Connectez-vous!\n            </span>\n            \n              <div className=\"wrap-input100 validate-input m-b-10 m-t-10\" >\n                <input className=\"input100\" type=\"text\" name=\"username\"\n                  placeholder=\"Entrez nom d'utilisateur\"\n                  value={username}\n                  onChange={this.changeHandler}\n\n                />\n                <span className=\"focus-input100\"></span>\n                <span className=\"symbol-input100\">\n                  <i className=\"fa fa-user\"></i>\n                </span>\n              </div>\n\n              <div className=\"wrap-input100 validate-input m-b-10\" >\n                <input className=\"input100\" type=\"password\"\n                  name=\"password\" placeholder=\"Entrez Mot de pass\"\n                  value={password}\n                  onChange={this.changeHandler}\n                />\n                <span className=\"focus-input100\"></span>\n                <span className=\"symbol-input100\">\n                  <i className=\"fa fa-lock\"></i>\n                </span>\n              </div>\n            {\n            this.state.isload_data\n            ?\n              <div className=\"loader \">\n                <Spinner size={120} spinnerColor={\"#333\"} spinnerWidth={2} visible={this.state.isload_data} />\n              </div>\n              :\n               <div className=\"container-login100-form-btn p-t-10\">\n                <button className=\"login100-form-btn\">\n                  Login\n              </button>\n              </div>\n            }\n             \n\n            </form>\n          </div>\n        </div>\n      </div>\n\n\n\n    );\n  }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}